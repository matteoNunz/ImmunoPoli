IPOTESI:
* ogni persona fornisce sempre dati veritieri
* l'attributo 'App' in persona fa riferimento al fatto che la persona possiede o meno un'applicazione di tracciamento
* tempo di incubazione covid + tempo di manifestazione dei sintomi + tempo di ricezione dell'esito del tampone = 7 gg
* cancellazione dei dati relativi ai contatti avuti precedenti a 10 gg
* ID univoco per identificare persone e luoghi --> aggiornato a 'strada + città' come identificativo univoco
* ad un indirizzo è associata una e una sola famiglia o gruppo di conviventi --> una possibile soluzione per riuscire a modellare anche gli appartamenti che appartengono allo stesso palazzo (stesso indirizzo) è aggiungere un attributo che identifica il numero di appartamento 
* il numero di dosi di vaccino effettuate non è esplicitato è reperibile tramite una count nella query 
* non tenuto in considerazione il presunto contagio

POSSIBLE QUERIES:
* mostrare tutti i contagi avvenuti direttamente
* mostrare tutti i contagi avvenuti indirettamente
* mostrare la probabilità di contagio in un luogo / ora -> mostra i primi 5 luoghi con probabilità di contagio più alta
* mostrare la positività in base al vaccino effettuato
* in base al cap individuare quanta gente si è vaccinata
* numero di contatti tramite app di una persona in un range temporale
* famiglie(case) con almeno un membro positivo (10g)
* controllare che tutti quelli che hanno avuto un contatto con un positivo abbiano fatto il tampone
    -> mostra chi non lo ha ancora fatto e SEGNALARLO
* controlla quanti tamponi sono stati fatti in un mese
* controlla quanti vaccini sono stati in un mese
* controlla quanti positivi in un mese
* cercare età media dei positivi


POSSIBLE COMMANDS:
* aggiornamento tracciamento con applicazione (delete old relationships)
* aggiornamento nuovo test positivo -> relazione Infect (Union & Distinct)
* crea nuovi tamponi con le persone che hanno la relazione Infect
* crea nuove persone
* crea nuove visite
* update morti (nodo Paradise dove collegare le persone)

USER QUERY:
* visualizzare i suoi dati
* visualizzare contatti

USER COMMAND:
* modificare i propri dati


APP: 
* nella schermata --> iniziale scelta | APP MANAGER | o | USER |
* APP MANAGER --> query di analisi, visualizzazione e aggiornamento dei dati + visualizzazione di alcuni trends 
* USER --> dopo autenticazione --> visualizzare le informazioni personali e aggiornamento di esse + visualizzazione covid certification + posti visitati di recente + test effettuati con esito + segnalazioni 

Rapida info from Matteo (sennò mi dimentico)
Per quanto riguarda la questione luogo facendo le query per generare il tutto mi sono accorto che al posto di Place
    si possono considerare solo nodi che ereditano da Place mantenendo nodi Home e nodi Location dove la differenza
    principale è la label, mentre il resto rimarrebbe uguale come abbiamo detto (tranne attributo nome e tipo)
    In questo modo anche per query future è molto più easy distinguere i luoghi tra casa e luogo pubblico

- Da aggiornare campi dei nodi vaccino
- Sistemare diagramma E-R (relazione reside diventa live, collegate con private house)

Query:

-contatti indiretti tramite app
    MATCH (p1:Person)-[:APP_CONTACT*]->(p2:Person) RETURN p1 , p2

-cercare età media dei positivi
    MATCH (pp:Person)-[r:MAKE]->(t:Test)
    WHERE r.result = "Positive" AND r.date >= date() - duration({days: 10})
    RETURN (SUM(DISTINCT(toFloat(pp.age))) / COUNT(DISTINCT(pp)))

- persone che abitano con persone che hanno avuto un tampone positivo
  negli ultimi 10 gg:
	MATCH (p:Person)-[:LIVE]->(h:House)<-[:LIVE]-(p1:Person)-[r:MAKE {result: "Positive"}]->()
	WHERE r.result = "Positive" AND r.date >= date() - duration({days: 10})
	RETURN p

- case con almeno un positivo (10gg):
	MATCH (h:House)<-[:LIVE]-(p:Person)-[r:MAKE {result: "Positive"}]->()
	WHERE r.result = "Positive" AND r.date >= date() - duration({days: 10})
	RETURN h

- test effettuati negli ultimi 30gg:
    MATCH (p:Person)-[m:MAKE]->(t:Test)
    WHERE date() <= m.date AND m.date >= date() - duration({days: 30})
    RETURN COUNT(m)

- test effettuati in un certo mese:
  MATCH (p:Person)-[m:MAKE]->(t:Test)
  WHERE m.date.month = #numero_mese (1...12)
  RETURN COUNT(m)


